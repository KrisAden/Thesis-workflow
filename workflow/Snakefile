# workflow/Snakefile
import os, sys, yaml
from pathlib import Path
from snakemake.shell import shell

ROOT = Path.cwd()
SRC  = ROOT / "src"
PYTHON = sys.executable
CFG = ROOT / "config/config.yaml"

# OS-aware runner; pass module name per rule
if os.name == "nt":
    shell.executable("powershell")
    RUN = lambda module: f'& "{PYTHON}" -m {module} --config "{CFG}"'
else:
    shell.executable("/bin/bash")
    RUN = lambda module: f'PYTHONPATH="{SRC}" "{PYTHON}" -m {module} --config "{CFG}"'

